function disp(n,e){return e?n.toPrecision(CONST.displayPrecision):Number(n.toPrecision(CONST.displayPrecision))}function doTransition(){document.body.classList.remove("scene-falling","scene-boat"),document.body.classList.add("scene-transitioning"),n2l.active=n2l[["falling","boat"][n2l.scene]],n2l.active.velocity=0,["force","mass","accel"].forEach(function(n){n2l.$[n].classList.remove("can-edit")}),n2l.active.dynamic.forEach(function(n){n2l.$[n].classList.add("can-edit")}),document.body.classList.remove("scene-transitioning"),document.body.classList.add("scene-"+["falling","boat"][n2l.scene])}function draw(){requestAnimationFrame(draw);var n=Date.now();n2l.timing.delta=n-n2l.timing.last,n2l.timing.last=n,n2l.timing.fps=1e3/n2l.timing.delta;var e=(49*n2l.timing.runningFPS+n2l.timing.fps)/50;e!==n2l.timing.runningFPS&&(n2l.timing.runningFPS=e,document.getElementById("fps").innerText=Math.floor(e)),n2l.active.velocity+=n2l.active.fma.acceleration*n2l.timing.delta*.001,n2l.updateDisplays()}var CONST={densityAir:1.225,sailArea:7.5,accelGravity:9.8,displayPrecision:4},n2l={};n2l.stage={width:0,height:0,mouse:{x:0,y:0}},n2l.$canvas=document.getElementById("c"),n2l.ctx=n2l.$canvas.getContext("2d"),n2l.falling={velocity:0},n2l.falling.fma=new Ph.FMARelationship,n2l.falling.fma.getForce({mass:1,acceleration:CONST.accelGravity},!0),n2l.falling.dynamic=["mass"],n2l.falling.find="getForce",n2l.falling.range={mass:{max:3e3,min:.1}},n2l.falling.getMassType=function(n){return["marble","brick","bowling ball","anvil","piano","rhino"][function(){var e=0;return n>=.5&&e++,n>=4&&e++,n>=10&&e++,n>=200&&e++,n>=1e3&&e++,e}()]},n2l.boat={velocity:0},n2l.boat.fma=new Ph.FMARelationship,n2l.boat.fma.getAcceleration({mass:2e3,force:1*CONST.densityAir*CONST.sailArea},!0),n2l.boat.dynamic=["force","mass"],n2l.boat.find="getAcceleration",n2l.boat.range={force:{min:.1*.1*CONST.densityAir*CONST.sailArea,max:1072.5625*CONST.densityAir*CONST.sailArea},mass:{min:1800,max:3600}},n2l.boat.getBeaufortNumber=function(n){var e=0;return n>=.278&&e++,n>=1.667&&e++,n>=3.333&&e++,n>=5.556&&e++,n>=8.056&&e++,n>=10.83&&e++,n>=13.89&&e++,n>=17.22&&e++,n>=20.83&&e++,n>=24.72&&e++,n>=28.61&&e++,n>=32.5&&e++,e},n2l.boat.getBeaufortDesc=function(n){return["calm","light air","light breeze","gentle breeze","moderate breeze","fresh breeze","strong breeze","near gale","gale","strong gale","storm","violent storm","hurricane"][n]},window.addEventListener("mousemove",function(n){n2l.stage.mouse.x=n.clientX,n2l.stage.mouse.y=n.clientY}),window.addEventListener("resize",function n(){return n2l.$canvas.width=n2l.stage.width=window.innerWidth,n2l.$canvas.height=n2l.stage.height=window.innerHeight,n}()),function(){}(Util),n2l.scene=0,function e(){n2l.$sceneToggle=document.getElementById("scene-toggle"),n2l.$sceneToggle.addEventListener("click",function(){n2l.scene=1^n2l.scene,doTransition()})}(),function t(){n2l.$={},n2l.$.ws={},n2l.$.ws.beaufortNumber=document.getElementById("ws-beaufort"),n2l.$.ws.beaufortDescription=document.getElementById("ws-description"),n2l.$.ws.value=document.getElementById("ws-value"),n2l.$.force=document.getElementById("value-force"),n2l.$.mass=document.getElementById("value-mass"),n2l.$.massType=document.getElementById("type-mass"),n2l.$.accel=n2l.$.acceleration=document.getElementById("value-accel"),n2l.$.velocity=document.getElementById("vel-value"),n2l.$.velocityReset=document.getElementById("vel-reset"),n2l.$.velocityReset.addEventListener("click",function(){n2l.active.velocity=0}),n2l.updateDisplays=function(){if(1===n2l.scene){var n=Math.sqrt(n2l.active.fma.force/(CONST.densityAir*CONST.sailArea)),e=n2l.boat.getBeaufortNumber(n);n2l.$.ws.beaufortNumber.innerText=e,n2l.$.ws.beaufortDescription.innerText=n2l.boat.getBeaufortDesc(e),n2l.$.ws.value.innerText=disp(n),n2l.$.massType.innerText=""}else n2l.$.massType.innerText=n2l.falling.getMassType(n2l.active.fma.mass);n2l.$.force.innerText=disp(n2l.active.fma.force),n2l.$.mass.innerText=disp(n2l.active.fma.mass),n2l.$.accel.innerText=disp(n2l.active.fma.acceleration),n2l.$.velocity.innerText=disp(n2l.active.velocity,1)},n2l.changing="",n2l.changingStartX=0,n2l.changingStart=0,["force","mass","acceleration"].forEach(function(n){n2l.$[n].addEventListener("mousedown",function(){this.classList.contains("can-edit")&&(n2l.changing=n,n2l.changingStart=n2l.active.fma[n])})}),document.body.addEventListener("mouseup",function(){n2l.changing=""}),document.body.addEventListener("mousemove",function(n){if(n2l.changing){var e=Math.exp(8*(n.clientX-n2l.changingStartX)/n2l.stage.width);n2l.active.fma[n2l.active.find](function(n){return n[n2l.changing]=Math.max(Math.min(e*n2l.changingStart,n2l.active.range[n2l.changing].max),n2l.active.range[n2l.changing].min),n}({}),!0)}else n2l.changingStartX=n.clientX})}(),n2l.timing={},n2l.timing.last=Date.now(),n2l.timing.runningFPS=60,doTransition(),requestAnimationFrame(draw);
//# sourceMappingURL=./n2l.min.js.map